(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{471:function(s,a,t){"use strict";t.r(a);var e=t(51),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"关于存储配额的说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于存储配额的说明"}},[s._v("#")]),s._v(" 关于存储配额的说明")]),s._v(" "),t("h2",{attrs:{id:"_1-存储说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-存储说明"}},[s._v("#")]),s._v(" 1. 存储说明")]),s._v(" "),t("p",[s._v("天河系统采用Lustre分布式存储文件系统，该文件系统由多个存储结点构成，对外提供一个统一的大分区，供所有登陆结点与计算结点进行挂载。")]),s._v(" "),t("p",[s._v("Lustre高性能存储用于用户进行计算任务的数据存储，用户在登陆系统后看到的数据存储在Lustre存储中。")]),s._v(" "),t("p",[s._v("比如，用户名为 "),t("code",[s._v("zhenggang")]),s._v("，所属的文件系统为 "),t("code",[s._v("THL6")]),s._v("， 那么用户的根目录为 "),t("code",[s._v("/THL6/home/zhenggang")]),s._v(" 。")]),s._v(" "),t("h2",{attrs:{id:"_2-存储查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-存储查询"}},[s._v("#")]),s._v(" 2. 存储查询")]),s._v(" "),t("h3",{attrs:{id:"_2-1-登陆系统时可以显示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-登陆系统时可以显示"}},[s._v("#")]),s._v(" 2.1 登陆系统时可以显示")]),s._v(" "),t("p",[s._v("登陆系统后，通常就会显示该用户所属group（即用户组）的存储情况：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Disk quotas "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" group zhenggang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n     Filesystem    used    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("  limit   grace    files      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("   limit   grace\n          /THL6    123G     500G    1T       -       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000")]),s._v("       -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("center",[s._v("表1 磁盘配额各关键词说明 ")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("关键词")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("Filesystem")]),s._v(" "),t("td",[s._v("用户所在的共享分布式存储")])]),s._v(" "),t("tr",[t("td",[s._v("used")]),s._v(" "),t("td",[s._v("用户目前已经使用的存储（单位KB）")])]),s._v(" "),t("tr",[t("td",[s._v("quota")]),s._v(" "),t("td",[s._v("存储软限制（单位KB）")])]),s._v(" "),t("tr",[t("td",[s._v("limit")]),s._v(" "),t("td",[s._v("存储硬限制（单位KB）")])]),s._v(" "),t("tr",[t("td",[s._v("grace")]),s._v(" "),t("td",[s._v("存储状态")])]),s._v(" "),t("tr",[t("td",[s._v("files")]),s._v(" "),t("td",[s._v("用户已有的文件数量（单位：个）")])]),s._v(" "),t("tr",[t("td",[s._v("quota")]),s._v(" "),t("td",[s._v("文件数量软限制（单位：个）")])]),s._v(" "),t("tr",[t("td",[s._v("limit")]),s._v(" "),t("td",[s._v("文件数量硬限制（单位：个）")])]),s._v(" "),t("tr",[t("td",[s._v("grace")]),s._v(" "),t("td",[s._v("文件数量状态")])])])]),s._v(" "),t("h3",{attrs:{id:"_2-2-使用查询命令查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用查询命令查询"}},[s._v("#")]),s._v(" 2.2 使用查询命令查询")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TH-1A系统")]),s._v("\nlfs "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" -g "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F / "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "/"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询用户组")]),s._v("\nlfs "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" -u "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F / "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "/"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询用户")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TH-HPC系统")]),s._v("\nlfs "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" -g -h "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F / "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "/"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询用户组")]),s._v("\nlfs "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" -u -h "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F / "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "/"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询用户")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"_3-磁盘配额限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-磁盘配额限制"}},[s._v("#")]),s._v(" 3. 磁盘配额限制")]),s._v(" "),t("p",[s._v("为了合理利用有限的存储资源，目前中心对用户默认进行存储软限制"),t("code",[s._v("500G")]),s._v("，存储硬限制"),t("code",[s._v("1T")]),s._v("，文件数软限制"),t("code",[s._v("100万")]),s._v("，文件数硬限制"),t("code",[s._v("200万")]),s._v("的磁盘配额限制。")]),s._v(" "),t("p",[s._v("1）用户使用存储低于500G时，存储状态正常；")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Disk quotas "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" group zhenggang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n     Filesystem    used    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("  limit   grace    files      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("   limit   grace\n          /THL6    123G     500G    1T       -       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000")]),s._v("       -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("2）当用户使用存储介于"),t("code",[s._v("500G")]),s._v("和"),t("code",[s._v("1T")]),s._v("之间时，used参数对应的数字带有“*”表示用户配额异常，“6d23h59m57s”表示倒计时，如果用户在倒计时结束前将使用存储清理到"),t("code",[s._v("500G")]),s._v("以下，则存储状态恢复正常。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Disk quotas "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" group zhenggang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n     Filesystem    used     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("  limit          grace    files      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("   limit  grace\n          /THL6    768G*     500G    1T     6d23h59m57s    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000")]),s._v("      -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("3）如果在规定时间，否则用户的数据量超出软限制且超出倒计时，则无法使用了。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Disk quotas "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" group zhenggang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n     Filesystem    used     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("  limit   grace    files     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("    limit  grace\n          /THL6    768G*     500G    1T     none    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000")]),s._v("      -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("4）如果用户数据在倒计时期间继续增长，超出硬限制，则用户存储将无法写入，如图3-4所示；数据操作也会受限制，如图3-5所示。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Disk quotas "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" group zhenggang "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gid "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n     Filesystem    used     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("  limit   grace   files     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("     limit  grace\n          /THL6    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".2T*     500G    1T        -   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45678")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000000")]),s._v("       -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v('有的时候用户登录会出现错误提示“Some errors happened when getting quota info. Some devices may be not working or deactivated. The data in "[]" is inaccurate.”这是因为登陆结点quota服务没有启用，对用户本身的操作和作业不会有影响。')])]),s._v(" "),t("hr"),s._v(" "),t("blockquote",[t("p",[s._v("小结")])]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("存储是有配额限制的：超出软限制，开启倒计时，倒计时到期就用不了了；超出硬限制，直接就用不了了。")]),s._v(" "),t("li",[s._v("查询配额，可以开启新终端登陆时自动显示，或通过命令查询"),t("code",[s._v("lfs quota -g -h zhenggang")]),s._v(" ，请将命令中的"),t("code",[s._v("zhenggang")]),s._v("改为自己的帐户名。")]),s._v(" "),t("li",[s._v("当配额出现"),t("code",[s._v("*")]),s._v("时，请及时清理数据。")]),s._v(" "),t("li",[s._v("免费配额不足，可以申请购买，"),t("a",{attrs:{href:"https://blog.mrzhenggang.com/about/",target:"_blank",rel:"noopener noreferrer"}},[s._v("联系我们"),t("OutboundLink")],1),s._v("。")])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);