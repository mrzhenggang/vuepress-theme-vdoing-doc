(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{478:function(s,e,a){"use strict";a.r(e);var t=a(51),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-什么是module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是module"}},[s._v("#")]),s._v(" 1. 什么是module")]),s._v(" "),a("p",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mrzhenggang/CDN@master/img/module/module-logo.png",width:"500"}})]),s._v(" "),a("p",[s._v("Environment Modules包通过模块文件动态修改用户的环境。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("module avail 或 module av")]),s._v(" "),a("td",[s._v("查看系统中可用的软件")])]),s._v(" "),a("tr",[a("td",[s._v("module add 或 module load")]),s._v(" "),a("td",[s._v("加载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module rm 或 unload")]),s._v(" "),a("td",[s._v("卸载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module list 或 module li")]),s._v(" "),a("td",[s._v("显示已加载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module purge")]),s._v(" "),a("td",[s._v("卸载所有模块")])]),s._v(" "),a("tr",[a("td",[s._v("module show")]),s._v(" "),a("td",[s._v("显示模块配置文件")])]),s._v(" "),a("tr",[a("td",[s._v("module swap 或 module switch")]),s._v(" "),a("td",[s._v("将模块1 替换为 模块2")])]),s._v(" "),a("tr",[a("td",[s._v("module help")]),s._v(" "),a("td",[s._v("查看具体软件的信息")])])])]),s._v(" "),a("h2",{attrs:{id:"_2-module使用初级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-module使用初级"}},[s._v("#")]),s._v(" 2. module使用初级")]),s._v(" "),a("h3",{attrs:{id:"_2-1-查看所有模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-查看所有模块"}},[s._v("#")]),s._v(" 2.1 查看所有模块")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module av\n------------- /usr/share/Modules/3.2.10/Applications -------------\nbedtools2/2.25.0-gcc4.8         \nbedtools2/2.26.0-gcc4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("上面的代码中，行首为"),a("code",[s._v("$")]),s._v("符的行是用户输入的命令，其他行为显示的结果，同下。")])]),s._v(" "),a("p",[s._v("说明：")]),s._v(" "),a("ol",[a("li",[s._v("有2个module模块")]),s._v(" "),a("li",[s._v("模块名称为"),a("code",[s._v("bedtools2/2.25.0-gcc4.8")]),s._v("和"),a("code",[s._v("bedtools2/2.26.0-gcc4.8")])]),s._v(" "),a("li",[s._v("模块名通常的命令方式为：软件名/版本-[编译器名]-[MPI编译器名]")]),s._v(" "),a("li",[s._v("在 "),a("code",[s._v("bedtools2/2.26.0-gcc4.8")]),s._v("模块后面有一个"),a("code",[s._v("default")]),s._v("，表示它是"),a("code",[s._v("bedtools2")]),s._v("软件的默认版本，即只写"),a("code",[s._v("bedtools2")]),s._v(" 即表示 "),a("code",[s._v("bedtools2/2.26.0-gcc4.8")])])]),s._v(" "),a("blockquote",[a("p",[s._v("在平台上有数百个可用module模块，此处只列2个教学用。")])]),s._v(" "),a("p",[a("strong",[s._v("加载")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bedtools2/2.25.0-gcc4.8\n$ \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("没有任何报错表明加载成功。")]),s._v(" "),a("h3",{attrs:{id:"_2-2-查看已加载模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-查看已加载模块"}},[s._v("#")]),s._v(" 2.2 查看已加载模块")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.25.0-gcc4.8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-3-使用已加载模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用已加载模块"}},[s._v("#")]),s._v(" 2.3 使用已加载模块")]),s._v(" "),a("p",[s._v("我们看到"),a("code",[s._v("bedtools2/2.25.0-gcc4.8")]),s._v("已经成功加载了，用户可以直接调用"),a("code",[s._v("bedtools2")]),s._v("软件的相关命令了，例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ bedtools\nbedtools: flexible tools "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" genome arithmetic and DNA sequence analysis.\nusage:    bedtools "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("subcommand"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nThe bedtools sub-commands include:\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" Genome arithmetic "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    intersect     Find overlapping intervals "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" various ways.\n    window        Find overlapping intervals within a window around an interval.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[s._v("友情提示：在超算中心使用，登陆节点与计算节点是分开的，因此请使用作业调度系统提交任务。")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-卸载模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-卸载模块"}},[s._v("#")]),s._v(" 2.4 卸载模块")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" bedtools2/2.25.0-gcc4.8\n$ module li\nNo Modulefiles Currently Loaded.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("到此处，我们学到了：")]),s._v(" "),a("ol",[a("li",[s._v("如何查看所有的module模块 "),a("code",[s._v("module av")])]),s._v(" "),a("li",[s._v("如何加载一个模块 "),a("code",[s._v("module add 模块名")])]),s._v(" "),a("li",[s._v("如何查看已加载的模块 "),a("code",[s._v("module li")])]),s._v(" "),a("li",[s._v("如何卸载一个模块 "),a("code",[s._v("module rm 模块名")])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_3-module使用中级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-module使用中级"}},[s._v("#")]),s._v(" 3. module使用中级")]),s._v(" "),a("h3",{attrs:{id:"_3-1-显示模块详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-显示模块详细信息"}},[s._v("#")]),s._v(" 3.1 显示模块详细信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module show bedtools2/2.26.0-gcc4.8\n-------------------------------------------------------------------\n/usr/share/Modules/Applications/bedtools2/2.26.0-gcc4.8:\n\nmodule-whatis    bedtools2/2.26.0-gcc4.8\nconflict         bedtools2\nprepend-path     "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" /THL6/software/bedtools2/2.26.0-gcc4.8/bin\n-------------------------------------------------------------------\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_3-2-替换模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-替换模块"}},[s._v("#")]),s._v(" 3.2 替换模块")]),s._v(" "),a("p",[s._v("当我们加载了"),a("code",[s._v("bedtools2/2.25.0-gcc4.8")]),s._v("模块后，希望更改为"),a("code",[s._v("bedtools2/2.26.0-gcc4.8")]),s._v("模块，应该怎么做呢？")]),s._v(" "),a("p",[s._v("让我们先这样试一试：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.25.0-gcc4.8\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  bedtools2/2.26.0-gcc4.8\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bedtools2/2.26.0-gcc4.8\nbedtools2/2.26.0-gcc4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:150: Module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bedtools2/2.26.0-gcc4.8'")]),s._v(" \n    conflicts with the currently loaded module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bedtools2/2.25.0-gcc4.8'")]),s._v("\nbedtools2/2.26.0-gcc4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:102: Tcl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" execution failed: \n    conflict   bedtools2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("报错了！我们仔细观察这个错误"),a("code",[s._v("ERROR conflict bedtools2")]),s._v("，想一想这是为什么？")]),s._v(" "),a("p",[a("code",[s._v("bedtools2")]),s._v("软件有2个版本的，我们已经加载了一个了，要不把之前的先卸载了试试？")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.25.0-gcc4.8\n\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" bedtools2/2.25.0-gcc4.8\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" bedtools2/2.26.0-gcc4.8\n\n$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.26.0-gcc4.8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("成功了！因此，同类型的软件只能加载一个，加载新的之前要卸载旧的，否则就"),a("code",[s._v("conflict")]),s._v(" 冲突了。")]),s._v(" "),a("p",[s._v("可是，更换版本是一个很常见的操作，有没有更简便的方法呢？有的，请往下看。")]),s._v(" "),a("p",[s._v("更简单的方法为：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.25.0-gcc4.8\n\n$ module swap bedtools2/2.25.0-gcc4.8 bedtools2/2.26.0-gcc4.8\n\n$ module li\nCurrently Loaded Modulefiles:\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bedtools2/2.26.0-gcc4.8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("使用"),a("code",[s._v("module swap 旧模块名 新模块名")]),s._v(" 即可实现模块替换。")]),s._v(" "),a("h3",{attrs:{id:"_3-3-卸载所有模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-卸载所有模块"}},[s._v("#")]),s._v(" 3.3 卸载所有模块")]),s._v(" "),a("p",[s._v("当加载的模块非常多的时候，我们希望一次性都卸载了，命令为：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module purge\n$ module li\nNo Modulefiles Currently Loaded.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("到此处，我们学到了：")]),s._v(" "),a("ol",[a("li",[s._v("显示一个module模块的详细信息："),a("code",[s._v("module show 模块名")])]),s._v(" "),a("li",[s._v("替换一个module模块为新的module模块："),a("code",[s._v("module swap 旧模块名 新模块名")])]),s._v(" "),a("li",[s._v("一次性卸载所有已加载module模块："),a("code",[s._v("module purge")])])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：我们遇到过一个报错"),a("code",[s._v("ERROR conflict bedtools2")]),s._v(" ，关键词为 "),a("code",[s._v("conflict")]),s._v(" 即为版本冲突，它表明 "),a("code",[s._v("bedtools2")]),s._v("  模块已经加载，如果想加载新的，需要先卸载旧的。\n我们可以用 "),a("code",[s._v("module li")]),s._v(" 看看已加载的模块，把对应的冲突模块用"),a("code",[s._v("module rm")]),s._v("卸载后，在加载新的模块。\n我们也可以用"),a("code",[s._v("module swap")]),s._v(" 来直接将旧模块替换为新的模块。")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_4-module使用高级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-module使用高级"}},[s._v("#")]),s._v(" 4. module使用高级")]),s._v(" "),a("h3",{attrs:{id:"_4-1-模块依赖问题-prereq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-模块依赖问题-prereq"}},[s._v("#")]),s._v(" 4.1 模块依赖问题 prereq")]),s._v(" "),a("p",[s._v("我们再次使用"),a("code",[s._v("module av")]),s._v("命令，查看所有可用的module模块，这次我们以"),a("code",[s._v("espresso")]),s._v("软件为例，因为它复杂一点点。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module av \n------------- /usr/share/Modules/3.2.10/Applications -------------\nespresso/5.4.0-icc16-IMPI5.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("我们再来尝试加载一下"),a("code",[s._v("espresso/5.4.0-icc16-IMPI5.1")]),s._v("，输入命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ module add espresso/5.4.0-icc16-IMPI5.1\nespresso/5.4.0-icc16-IMPI5.1(27):ERROR:151: Module 'espresso/5.4.0-icc16-IMPI5.1' \n    depends on one of the module(s) 'Intel_compiler/16.0.3'\nespresso/5.4.0-icc16-IMPI5.1(27):ERROR:102: Tcl command execution failed: \n    prereq                Intel_compiler/16.0.3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("很遗憾，这回有信息提示，竟然是"),a("code",[s._v("ERROR prereq Intel_compiler/16.0.3")]),s._v("，这次又是为什么呢？")]),s._v(" "),a("p",[s._v("我们观察这个模块的名称"),a("code",[s._v("espresso/5.4.0-icc16-IMPI5.1")]),s._v("，在第二节中我们提到过module模块的常见命名规则：软件名/版本-[编译器名]-[MPI编译器名]，因此我们分析如下：")]),s._v(" "),a("ul",[a("li",[s._v("esresso 表示软件的名字")]),s._v(" "),a("li",[s._v("5.4.0 是软件的版本")]),s._v(" "),a("li",[s._v("icc16 是intel compiler的版本")]),s._v(" "),a("li",[s._v("IMPI5.1 是MPI编译器的版本")])]),s._v(" "),a("p",[s._v("详解：")]),s._v(" "),a("blockquote",[a("p",[s._v("一款并行程序通常需要串行编译器加并行编译器来编译，然后它通过类似"),a("code",[s._v("mpirun")]),s._v("的并行执行命令来运行。如果运行过程中缺少动态库就会报错。因此，我们设置了"),a("code",[s._v("依赖")]),s._v("关系，让加载软件模块的时候，必须预先加载"),a("code",[s._v("依赖")]),s._v("的其它模块（如编译器模块等），然后再加载模块本身，以免报错。")])]),s._v(" "),a("p",[s._v("我们仔细观察报错中的内容："),a("code",[s._v("prereq Intel_compiler/16.0.3")]),s._v("，它表明"),a("code",[s._v("espresso")]),s._v("这个模块依赖于"),a("code",[s._v("Intel_compiler")]),s._v("这个模块。")]),s._v(" "),a("p",[s._v("我们决定先加载"),a("code",[s._v("Intel_compiler")]),s._v("，再加载"),a("code",[s._v("espresso")]),s._v("模块：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" Intel_compiler/16.0.3\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" espresso/5.4.0-icc16-IMPI5.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后我们发现，有报错了，不过报错和之前的很类似。")]),s._v(" "),a("p",[s._v("我们决定把"),a("code",[s._v("MPI/Intel/IMPI/5.1.3.210")]),s._v("模块也加载上，最终输入：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" Intel_compiler/16.0.3\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" MPI/Intel/IMPI/5.1.3.210\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" espresso/5.4.0-icc16-IMPI5.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("如下图，没有任何报错，就成功了。")]),s._v(" "),a("h3",{attrs:{id:"_4-2-自定义路径配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-自定义路径配置"}},[s._v("#")]),s._v(" 4.2 自定义路径配置")]),s._v(" "),a("p",[s._v("用户可以通过设置 "),a("code",[s._v("MODULEPATH")]),s._v(" 或者通过 "),a("code",[s._v("module")]),s._v(" 命令来增加减少搜索路径。")]),s._v(" "),a("p",[s._v("方法1：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MODULEPATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/path/to/new/directory:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MODULEPATH")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 增加路径")]),s._v("\n$ module use --append /path/to/new/directory\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 减少路径")]),s._v("\n$ module unuse --append /path/to/old/directory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("提别提醒："),a("code",[s._v("MODULEPATH")]),s._v("等于号后面的值，以及"),a("code",[s._v("--append")]),s._v("后面的参数，都是实际希望增加或减少的搜索路径，不要照抄。")])]),s._v(" "),a("h3",{attrs:{id:"_4-3-配置文件编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-配置文件编写"}},[s._v("#")]),s._v(" 4.3 配置文件编写")]),s._v(" "),a("p",[s._v("我们先来看一个标准的module配置文件模板")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#%Module1.0#####################################################################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## modules modulefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## modulefiles/modules.  Generated from modules.in by configure.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\nproc ModulesHelp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                global version prefix\n\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('espresso/5.4.0-icc16-IMPI5.1, link with Intel_compiler/16.0.3,"')]),s._v(" \n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MPI/Intel/IMPI/5.1.3.210"')]),s._v("\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('After loading the module, you can try to use espresso"')]),s._v("\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('Adds Intel compilers to your environment variables."')]),s._v("\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v("This adds "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prefix")]),s._v('/* to several of the"')]),s._v("\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('environment variables."')]),s._v("\n                puts stderr "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v("Version "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$version")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule-whatis   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"espresso/5.4.0-icc16-IMPI5.1"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for Tcl script use only")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("     version         espresso/5.4.0-icc16-IMPI5.1\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("     prefix          /home/software/espresso/5.4.0-icc16-IMPI5.1\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("     exec_prefix     "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("     datarootdir     "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/share\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("     INSTALL_DIR     "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("\n\nconflict        espresso\n\nprereq          Intel_compiler/16.0.3\nprereq          MPI/Intel/IMPI/5.1.3.210\n\nprepend-path    "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("           \t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/bin\nprepend-path    LD_LIBRARY_PATH\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/lib\n\nprepend-path    LIBRARY_PATH\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/lib\nprepend-path    PKG_CONFIG_PATH\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/lib/pkgconfig\nprepend-path    C_INCLUDE_PATH\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/include\nprepend-path    CXX_INCLUDE_PATH\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${prefix}")]),s._v("/include\nprepend-path    MANPATH\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${datarootdir}")]),s._v("/man\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br")])]),a("p",[s._v("用户自己写module模块的时候，可以依照此模板进行修改。")]),s._v(" "),a("p",[s._v("参数说明：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("说明")]),s._v(" "),a("th",[s._v("备注")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("proc ModulesHelp")]),s._v(" "),a("td",[s._v("执行"),a("code",[s._v("module show 模块名")]),s._v("时候的反馈信息")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("set version")]),s._v(" "),a("td",[s._v("设置版本")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("set prefix")]),s._v(" "),a("td",[s._v("设置安装目录")]),s._v(" "),a("td",[s._v("非常关键")])]),s._v(" "),a("tr",[a("td",[s._v("conflict")]),s._v(" "),a("td",[s._v("设置"),a("code",[s._v("conflict")]),s._v("报错的")]),s._v(" "),a("td",[s._v("这就是之前遇到"),a("code",[s._v("error")]),s._v("的原因，同下")])]),s._v(" "),a("tr",[a("td",[s._v("prereq")]),s._v(" "),a("td",[s._v("用来设置依赖哪些模块的")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("prepend-path")]),s._v(" "),a("td",[s._v("添加一个路径到某个环境变量")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("PATH")]),s._v(" "),a("td",[s._v("将目录添加到"),a("code",[s._v("PATH")]),s._v("环境变量中")]),s._v(" "),a("td",[s._v("最常用的环境变量就是"),a("code",[s._v("PATH")]),s._v("和"),a("code",[s._v("LD_LIBRARY_PATH")])])]),s._v(" "),a("tr",[a("td",[s._v("LD_LIBRARY_PATH")]),s._v(" "),a("td",[s._v("将目录添加到"),a("code",[s._v("LD_LIBRARY_PATH")]),s._v("环境变量中")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("LIBRARY_PATH 等")]),s._v(" "),a("td",[s._v("与上面类似，通常运行软件命令时不需要，编译其他软件时候可能会用到")]),s._v(" "),a("td")])])]),s._v(" "),a("h2",{attrs:{id:"附录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[s._v("#")]),s._v(" 附录")]),s._v(" "),a("h3",{attrs:{id:"a-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a-安装"}},[s._v("#")]),s._v(" A 安装")]),s._v(" "),a("h4",{attrs:{id:"命令安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令安装"}},[s._v("#")]),s._v(" 命令安装")]),s._v(" "),a("p",[s._v("apt-get命令安装：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" environment-modules\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("yum命令安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" environment-modules\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"源码安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码安装"}},[s._v("#")]),s._v(" 源码安装")]),s._v(" "),a("p",[a("strong",[s._v("下载：")])]),s._v(" "),a("p",[s._v("从"),a("code",[s._v("https://sourceforge.net/projects/modules/files/")]),s._v("下载module源码，如果系统缺少tcl环境，需要额外下载安装"),a("code",[s._v("tcl")]),s._v("环境。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Modules-Tcl")]),s._v("\nhttps://jaist.dl.sourceforge.net/project/modules/Modules-Tcl/modules-tcl-1.923.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Modules")]),s._v("\nhttps://nchc.dl.sourceforge.net/project/modules/Modules/modules-3.2.10/modules-3.2.10.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("编译：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf modules-3.2.10.tar.gz\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" modules-3.2.10\n$ ./configure\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("可以使用"),a("code",[s._v("--prefix")]),s._v("指定安装目录。")])]),s._v(" "),a("p",[a("strong",[s._v("加载：")])]),s._v(" "),a("p",[s._v("如果使用的不是命令安装方式，而是源码方式编译到非系统默认路径，需要在使用"),a("code",[s._v("module")]),s._v("命令的时候，加载环境变量。")]),s._v(" "),a("p",[s._v("假如安装路径为 "),a("code",[s._v("$HOME/software")]),s._v(" ，那么需要加载环境：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/software/Modules/init/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("针对其他shell环境，如"),a("code",[s._v("csh")]),s._v("，可以加载：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/software/Modules/init/csh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("以下命令均针对"),a("code",[s._v("bash")]),s._v("环境。")]),s._v(" "),a("p",[a("strong",[s._v("修改系统默认搜索路径")])]),s._v(" "),a("p",[s._v("在上面我们介绍了用户设置路径的方法，此处我们介绍如何修改系统默认的module模块搜索路径。")]),s._v(" "),a("p",[s._v("在安装后的"),a("code",[s._v("Modules/3.2.10/init")]),s._v("目录，打开隐藏文件，增加/删除路径实现配置。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" .modulespath\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("直接输入路径来增加搜索路径；通过"),a("code",[s._v("#")]),s._v("注释行，或直接删除行来减少搜索路径。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  @(#)$Id: 38aa24cc33a5f54a93781d63005a084f74418022 $")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Module version 3.2.10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  init/.modulespath.  Generated from .modulespath.in by configure.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Modulepath initial setup")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ========================")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  This file defines the initial setup for the module files search path.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Comments may be added anywhere, which begin on # and continue until the")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     end of the line")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Each line containing a single path will be added to the MODULEPATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     environment variable. You may add as many as you want - just")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     limited by the maximum variable size of your shell.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n/usr/share/Modules/versions                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# location of version files")]),s._v("\n/usr/share/Modules/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MODULE_VERSION")]),s._v("/modulefiles     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Module pkg modulefiles (if versioning)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/usr/share/Modules/modulefiles    # Module pkg modulefiles (if no versioning)")]),s._v("\n/usr/share/Modules/modulefiles                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# General module files")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/usr/share/Modules/3.2.10/your_contribs                   # Edit for your requirements")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"b-常用命令列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b-常用命令列表"}},[s._v("#")]),s._v(" B 常用命令列表")]),s._v(" "),a("p",[s._v("表 Modules 常用命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("module avail 或 module av")]),s._v(" "),a("td",[s._v("查看系统中可用的软件")])]),s._v(" "),a("tr",[a("td",[s._v("module add 或 module load")]),s._v(" "),a("td",[s._v("加载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module rm 或 unload")]),s._v(" "),a("td",[s._v("卸载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module list 或 module li")]),s._v(" "),a("td",[s._v("显示已加载模块")])]),s._v(" "),a("tr",[a("td",[s._v("module purge")]),s._v(" "),a("td",[s._v("卸载所有模块")])]),s._v(" "),a("tr",[a("td",[s._v("module show")]),s._v(" "),a("td",[s._v("显示模块配置文件")])]),s._v(" "),a("tr",[a("td",[s._v("module swap 或 module switch")]),s._v(" "),a("td",[s._v("将模块1 替换为 模块2")])]),s._v(" "),a("tr",[a("td",[s._v("module help")]),s._v(" "),a("td",[s._v("查看具体软件的信息")])])])]),s._v(" "),a("h3",{attrs:{id:"c-遇到报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-遇到报错"}},[s._v("#")]),s._v(" C 遇到报错")]),s._v(" "),a("p",[s._v("常见报错有2类：")]),s._v(" "),a("p",[a("strong",[s._v("1. conflict")])]),s._v(" "),a("p",[s._v("对于"),a("code",[s._v("conflict")]),s._v("而言，通常是由于同款软件不能同时加载多个版本，因此建议卸载之前的，再加载新的。提示哪个模块冲突了就卸载哪一个。")]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bedtools2/2.26.0-gcc4.8\nbedtools2/2.26.0-gcc4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:150: Module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bedtools2/2.26.0-gcc4.8'")]),s._v(" \n    conflicts with the currently loaded module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bedtools2/2.25.0-gcc4.8'")]),s._v("\nbedtools2/2.26.0-gcc4.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:102: Tcl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" execution failed: \n    conflict   bedtools2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("我们要加载的是"),a("code",[s._v("bedtools2/2.26.0-gcc4.8")]),s._v("，但与"),a("code",[s._v("bedtools2/2.25.0-gcc4.8")]),s._v("冲突了，那么：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  bedtools2/2.25.0-gcc4.8\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bedtools2/2.26.0-gcc4.8\n$ \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("2. prereq")])]),s._v(" "),a("p",[s._v("对于"),a("code",[s._v("prereq")]),s._v("而言，通常是加载的模块依赖其他默认，因此必须先加载依赖的模块，在加载该模块。")]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" espresso/5.4.0-icc16-IMPI5.1\nespresso/5.4.0-icc16-IMPI5.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:151: Module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'espresso/5.4.0-icc16-IMPI5.1'")]),s._v(" \n    depends on one of the module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Intel_compiler/16.0.3'")]),s._v("\nespresso/5.4.0-icc16-IMPI5.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ERROR:102: Tcl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" execution failed: \n    prereq                Intel_compiler/16.0.3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("我们需要先加载"),a("code",[s._v("Intel_compiler/16.0.3")]),s._v("，再加载"),a("code",[s._v("espresso/5.4.0-icc16-IMPI5.1")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" Intel_compiler/16.0.3\n$ module "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" espresso/5.4.0-icc16-IMPI5.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("留一个问题，以上两行命令能够加载成功吗？")])])}),[],!1,null,null,null);e.default=n.exports}}]);