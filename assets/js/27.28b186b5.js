(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{424:function(s,a,t){"use strict";t.r(a);var n=t(51),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"什么是petsc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是petsc"}},[s._v("#")]),s._v(" 什么是PETSc")]),s._v(" "),t("p",[s._v("PETSc, pronounced PET-see (the S is silent), is a suite of data structures and routines for the scalable (parallel) solution of scientific applications modeled by partial differential equations. It supports MPI, and GPUs through CUDA or OpenCL, as well as hybrid MPI-GPU parallelism.")]),s._v(" "),t("p",[s._v("英文版安装说明可参考官网：\nhttps://www.mcs.anl.gov/petsc/documentation/installation.html#exampleusage")]),s._v(" "),t("p",[s._v("因为安装PETSc可以有很多很多扩展包，所以我们在共享目录下只安装了基础的几个扩展，用户有需求的可以自行下载安装自己需要的扩展包。下面先介绍安装最基础的包，然后说明如何安装扩展包。")]),s._v(" "),t("h2",{attrs:{id:"安装最基础环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装最基础环境"}},[s._v("#")]),s._v(" 安装最基础环境")]),s._v(" "),t("p",[s._v("最基础的编译环境包括：")]),s._v(" "),t("ul",[t("li",[s._v("编译器 Intel Compiler 或 GNU Compiler")]),s._v(" "),t("li",[s._v("MPI编译器：如mpich等")]),s._v(" "),t("li",[s._v("BLAS/LAPACK库：如使用netlib的lapack，或者fblaslapack，或者Intel的MKL库")])]),s._v(" "),t("p",[s._v("举例如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 下载一个petsc的包，如无特殊需求，可以下载lite版，小一点\n# 下载地址：https://www.mcs.anl.gov/petsc/download/index.html\n\ncd ~ # 进入用户根目录\ntar zxvf petsc-lite-3.14.1.tar.gz\ncd petsc-lite-3.14.1\n\n# 加载编译环境（Intel Compiler + MPI库）\nmodule add Intel_compiler/13.0\nmodule add MPI/mpich/intel2013\nmodule add mkl/13.0.0\nmodule add cmake/3.14.4\n\n# configure\n./configure prefix=$HOME/software/petsc/3.14.1-icc13-mpich \\\n\t--with-cc=mpicc --with-cxx=mpicxx --with-fc=mpif90 \\\n\t--with-mpiexec=/usr/bin/yhrun \\\n\t--with-blas-lapack-dir=$MKLROOT \n\n# make\nmake PETSC_DIR=$HOME/petsc-3.14.1 PETSC_ARCH=arch-linux2-c-debug\n\n# make install\nmake PETSC_DIR=$HOME/petsc-3.14.1 PETSC_ARCH=arch-linux2-c-debug install \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("建议")]),s._v(" "),t("ol",[t("li",[s._v("官网介绍有很多种情况下的配置说明，推荐阅读")]),s._v(" "),t("li",[s._v("默认是debug版本，如果希望获得opt版本，请添加configure的参数 "),t("code",[s._v("--with-debugging=0")])])])]),s._v(" "),t("h2",{attrs:{id:"安装扩展包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展包"}},[s._v("#")]),s._v(" 安装扩展包")]),s._v(" "),t("p",[s._v("PETSc添加扩展的方式有2中：")]),s._v(" "),t("ol",[t("li",[s._v("通过 "),t("code",[s._v("--with-xx-dir")]),s._v(" 的方式指定已经安装过的目录")]),s._v(" "),t("li",[s._v("通过 "),t("code",[s._v("--download-xx")]),s._v(" 的方式自动下载包并编译安装（需要联网）")]),s._v(" "),t("li",[s._v("通过 "),t("code",[s._v("--download-xx=/path/to/package.tar.gz")]),s._v(" 指定安装包的路径，扩展包可以去https://ftp.mcs.anl.gov/pub/petsc/externalpackages/下载")])]),s._v(" "),t("p",[s._v("我们在平台上已经将"),t("code",[s._v("https://ftp.mcs.anl.gov/pub/petsc/externalpackages/")]),s._v("网址下的包下载到的系统目录（定期会更新），"),t("code",[s._v("TH-1A")]),s._v("集群用户的目录为"),t("code",[s._v("/vol-th/software/petsc/externalpackages")]),s._v("，用户可以自行指定该目录。")]),s._v(" "),t("p",[s._v("我们尝试安装几个扩展包吧，比如：")]),s._v(" "),t("ul",[t("li",[s._v("fblaslapack")]),s._v(" "),t("li",[s._v("fftw")]),s._v(" "),t("li",[s._v("hdf5")]),s._v(" "),t("li",[s._v("netcdf")]),s._v(" "),t("li",[s._v("metis")])]),s._v(" "),t("h3",{attrs:{id:"寻找包名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#寻找包名"}},[s._v("#")]),s._v(" 寻找包名")]),s._v(" "),t("p",[s._v("寻找包名有2个方式：")]),s._v(" "),t("p",[s._v("简单的方式，前往系统目录找一个比较新的。例如"),t("code",[s._v("fftw")]),s._v("，我们前往"),t("code",[s._v("/vol-th/software/petsc/externalpackages")]),s._v(" 目录，使用如"),t("code",[s._v("ls | grep fftw")]),s._v("命令，找到包：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("fftw-3.1.1.tar.gz\nfftw-3.1.2.tar.gz\nfftw-3.2alpha2.tar.gz\nfftw-3.2alpha3.tar.gz\nfftw-3.3.2.tar.gz\nfftw-3.3.3.tar.gz\nfftw-3.3.7.tar.gz\nfftw-3.3.8.tar.gz\nfftw-3.3alpha1.tar.gz\nfftw-3.3-beta1.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("我们可以选用如最新的"),t("code",[s._v("fftw-3.3.8.tar.gz")]),s._v("包。")]),s._v(" "),t("p",[s._v("其他的包：")]),s._v(" "),t("ul",[t("li",[s._v("fblaslapack : fblaslapack-3.4.2.tar.gz")]),s._v(" "),t("li",[s._v("hdf5 : hdf5-1.12.0.tar.bz2")]),s._v(" "),t("li",[s._v("netcdf : netcdf-4.5.0.tar.gz")]),s._v(" "),t("li",[s._v("metis : metis-5.1.0-p3.tar.gz")])]),s._v(" "),t("p",[s._v("第二种，可以在petsc源码包的目录，找到该版本的对应的库版本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入用户根目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf petsc-lite-3.14.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入压缩包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" petsc-lite-3.14.1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入指定目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" config/BuildSystem/config/packages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("这个目录下有各个包的下载方式和版本，例如fftw库，我们使用"),t("code",[s._v("ls")]),s._v("查看全部文件，再找到"),t("code",[s._v("fftw.py")]),s._v("文件，或者使用"),t("code",[s._v("ls | grep fftw")]),s._v("找到"),t("code",[s._v("fftw.py")]),s._v(" 文件。")]),s._v(" "),t("p",[s._v("我们打开这个文件："),t("code",[s._v("vim fftw.py")]),s._v("，内容如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" config.package\n\nclass Configure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config.package.GNUPackage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n  def __init__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self, framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n    config.package.GNUPackage.__init__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self, framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# host locally as fftw.org url can expire after new release.")]),s._v("\n    self.download   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://www.fftw.org/fftw-3.3.8.tar.gz'")]),s._v(",\n                       "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://ftp.mcs.anl.gov/pub/petsc/externalpackages/fftw-3.3.8.tar.gz'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    self.functions  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fftw_malloc'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fftw_mpi_cleanup'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    self.includes   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fftw3-mpi.h'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    self.liblist    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'libfftw3_mpi.a'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'libfftw3.a'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    self.pkgname    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fftw3'")]),s._v("\n    self.precisions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'double'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("可以看到这个版本的petsc库自动关联的fftw库"),t("code",[s._v("fftw-3.3.8.tar.gz")]),s._v("，我们前往"),t("code",[s._v("/vol-th/software/petsc/externalpackages")]),s._v("，寻找到这个文件即可。")]),s._v(" "),t("p",[s._v("其他的包：")]),s._v(" "),t("ul",[t("li",[s._v("fblaslapack : fblaslapack-v3.4.2-p3.tar.gz")]),s._v(" "),t("li",[s._v("hdf5 : hdf5-1.12.0.tar.bz2")]),s._v(" "),t("li",[s._v("netcdf : netcdf-4.5.0.tar.gz")]),s._v(" "),t("li",[s._v("metis : metis-5.1.0-p3.tar.gz")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("如果在/vol-th/software/petsc/externalpackages目录没有找到你希望的包，那么可以根据对应的py文件的路径，自行下载压缩包，传到自己账号目录下，并在接下来的路径设置时，配置为自己的路径")])]),s._v(" "),t("h3",{attrs:{id:"安装扩展包-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展包-2"}},[s._v("#")]),s._v(" 安装扩展包")]),s._v(" "),t("p",[s._v("注意给出扩展包的路径即可")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入用户根目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~ \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果之前没有解压缩过")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf petsc-lite-3.14.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" petsc-lite-3.14.1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加载编译环境（GNU Compiler + MPI库）")]),s._v("\nmodule "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" GCC/4.9.4\nmodule "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" MPI/mpich/gcc4.9.4\nmodule "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" cmake/3.14.4\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# configure")]),s._v("\n./configure "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("prefix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/software/petsc/3.14.1-gcc49-mpich "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--with-cc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mpicc --with-cxx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mpicxx --with-fc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mpif90 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--with-mpiexec"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/yhrun "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--download-fblaslapack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/vol-th/software/petsc/externalpackages/fblaslapack-3.4.2.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--download-fftw"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/vol-th/software/petsc/externalpackages/fftw-3.3.8.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--download-hdf5"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/vol-th/software/petsc/externalpackages/hdf5-1.12.0.tar.bz2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--download-netcdf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/vol-th/software/petsc/externalpackages/netcdf-4.5.0.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--download-metis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/vol-th/software/petsc/externalpackages/metis-5.1.0-p3.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t--with-debugging"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COPTFLAGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-O3"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CXXOPTFLAGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-O3"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("FOPTFLAGS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-O3"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/petsc-3.14.1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_ARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arch-linux2-c-opt\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/petsc-3.14.1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_ARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arch-linux2-c-opt "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("建议")]),s._v(" "),t("p",[s._v("优先推荐使用Intel Compiler + 系统自带MPI + MKL库，这样速度快强烈不建议通过PETSc自行编译mpi，因为使用系统的MPI速度快")])]),s._v(" "),t("h2",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),t("p",[s._v("配置环境（以刚刚使用gcc4.9.4编译的为例）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("module "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" GCC/4.9.4\nmodule "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" MPI/mpich/gcc4.9.4\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/petsc-3.14.1 \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PETSC_ARCH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arch-linux2-c-opt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("进入算例目录编译并运行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/petsc-3.14.1/src/ksp/ksp/examples/tutorials\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" ex50\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行")]),s._v("\n./ex50  -da_grid_x "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -da_grid_y "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -mat_view\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);